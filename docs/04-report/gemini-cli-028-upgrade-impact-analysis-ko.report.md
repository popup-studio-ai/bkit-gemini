# Gemini CLI v0.28.2 업그레이드 영향도 분석 보고서

> **상태**: 완료
> **프로젝트**: bkit-gemini
> **버전**: 1.5.1 (대상: v0.28.2 호환성)
> **작성자**: bkit CTO 팀 (cto-lead, qa-strategist, code-analyzer)
> **완료일**: 2026-02-12
> **PDCA 사이클**: #1

---

## 1. 개요

### 1.1 분석 목적
Gemini CLI v0.28.2 업데이트가 `bkit-gemini` 확장에 미치는 영향을 분석하고, 새로운 보안 정책 및 기능에 따른 코드/문서 대응 방안을 수립합니다.

### 1.2 핵심 결과
*   **호환성**: `bkit` v1.5.1의 훅(Hooks) 및 스킬 오케스트레이션 로직은 v0.28.2에서 **정상 작동**함이 확인되었습니다.
*   **보안**: v0.28.2부터 도입된 '훅 보안 경고'로 인해 설치 시 사용자 알림이 발생합니다. 이는 정상적인 동작이며 사용자 안내가 필요합니다.
*   **최적화**: CLI 네이티브 `activate_skill` 성능 개선으로 향후 `lib/skill-orchestrator.js`를 간소화할 수 있는 기회를 확인했습니다.
*   **도구 격리**: 기본 도구 권한 설정상 차단되는 기능은 없으나, 환경별 모니터링이 권장됩니다.

---

## 2. 상세 분석 내용

### 2.1 훅(Hook) 시스템 (보안 경고 강화)
*   **상태**: ⚠️ **주의 (예상된 동작)**
*   **영향**: Gemini CLI v0.28.2는 `BeforeTool`/`AfterTool` 등 핵심 도구에 간섭하는 훅이 있을 경우 보안 경고를 표시합니다.
*   **대응**: `bkit`의 훅은 컨텍스트 엔지니어링(PDCA 단계 추적, 메모리 관리)을 위한 필수 요소입니다. 사용자에게 이 경고가 안전함을 알리는 문서 업데이트가 필요합니다.

### 2.2 스킬 오케스트레이션
*   **상태**: ✅ **호환 가능**
*   **영향**: `lib/skill-orchestrator.js`는 v0.28.2의 네이티브 개선 사항 위에서도 문제없이 작동합니다. `bkit`만의 메타데이터(PDCA 단계, 전담 에이전트 등) 처리는 현재의 커스텀 로직이 여전히 필요합니다.
*   **조치**: 즉각적인 코드 수정은 불필요하나, 네이티브 기능과의 중복 제거를 위한 리팩토링을 백로그에 추가합니다.

### 2.3 도구 격리 및 샌드박스
*   **상태**: ✅ **호환 가능**
*   **영향**: `write_file`, `run_shell_command` 등의 도구가 v0.28.2의 기본 샌드박스 정책에 의해 차단되지 않음을 확인했습니다.

### 2.4 개발자 워크플로우 (신규 명령)
*   **상태**: ℹ️ **개선 가능**
*   **영향**: v0.28.2에 추가된 `/agents refresh` 명령은 `bkit` 개발 시 CLI 재시작 없이 메타데이터를 갱신할 수 있어 매우 유용합니다.
*   **조치**: README의 "개발 모드" 섹션에 해당 내용을 추가합니다.

---

## 3. 권장 대응 조치

### 3.1 문서 업데이트 (즉시 실행)
1.  **README.md**: '보안 및 권한' 섹션을 추가하여 훅 사용 이유와 보안 경고에 대해 설명합니다.
2.  **README.md**: '개발 모드' 섹션에 `/agents refresh` 사용법을 추가합니다.
3.  **README.md**: 공식 호환 버전을 v0.28.2+로 명시합니다.

### 3.2 코드 업데이트 (향후 과제)
1.  **리팩토링**: 네이티브 `activate_skill`이 `bkit` 수준의 메타데이터 처리를 지원하게 될 경우, `lib/skill-orchestrator.js`를 간소화합니다.

---

## 4. 결론
`bkit-gemini` v1.5.1은 Gemini CLI v0.28.2 환경에서 즉시 사용 가능합니다. 보안 경고 강화에 따른 사용자 불안감을 해소하기 위한 투명한 문서화가 핵심 대응 과제입니다.

---

*bkit CTO 팀 검토 완료*
